<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tutorial: 08 Motion and Orientation</title>
    
    <meta name="description" content="Xebra.js API Documentation" />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"meta":{"titlePrefix":"Xebra.js Docs","description":"Xebra.js API Documentation"},"default":{"outputSourceFiles":true,"staticFiles":{"paths":["tutorials"],"include":[],"excludePattern":".+\\.md$"}},"applicationName":"Xebra","footer":"TODO","copyright":"TODO","linenums":true};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Xebra</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
        <!--  NAMESPACES -->
        <ul>
            <li class="nav-header">Namespaces</li>
            
                <li class="item" data-name="Xebra">
                <span class="title">
                    <a href="Xebra.html">Xebra</a>
                    
                    <span class="static">static</span>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="Xebra.CONNECTION_STATES"><a href="Xebra.html#.CONNECTION_STATES">CONNECTION_STATES</a></li>
                
                    <li data-name="Xebra.LIVE_UNIT_STYLES"><a href="Xebra.html#.LIVE_UNIT_STYLES">LIVE_UNIT_STYLES</a></li>
                
                    <li data-name="Xebra.MOTION_TYPES"><a href="Xebra.html#.MOTION_TYPES">MOTION_TYPES</a></li>
                
                    <li data-name="Xebra.SUPPORTED_OBJECTS"><a href="Xebra.html#.SUPPORTED_OBJECTS">SUPPORTED_OBJECTS</a></li>
                
                    <li data-name="Xebra.VIEW_MODES"><a href="Xebra.html#.VIEW_MODES">VIEW_MODES</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                <span class="subtitle">Typedefs</span>
                
                    <li data-name="Xebra.NodeId"><a href="Xebra.html#.NodeId">NodeId</a></li>
                
                    <li data-name="Xebra.ParamValueType"><a href="Xebra.html#.ParamValueType">ParamValueType</a></li>
                
                    <li data-name="Xebra.PatchingRect"><a href="Xebra.html#.PatchingRect">PatchingRect</a></li>
                
                </ul>
                <ul class="methods itemMembers">
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
            
        </ul>
        <!--  CLASSES -->
        <ul>
            <li class="nav-header">Classes</li>
            
            <li class="item" data-name="FrameNode">
                <span class="title">
                    <a href="FrameNode.html">FrameNode</a>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="FrameNode#creationSequence"><a href="FrameNode.html#creationSequence">creationSequence</a></li>
                
                    <li data-name="FrameNode#id"><a href="FrameNode.html#id">id</a></li>
                
                    <li data-name="FrameNode#patcherId"><a href="FrameNode.html#patcherId">patcherId</a></li>
                
                    <li data-name="FrameNode#type"><a href="FrameNode.html#type">type</a></li>
                
                    <li data-name="FrameNode#viewMode"><a href="FrameNode.html#viewMode">viewMode</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="FrameNode#containsObject"><a href="FrameNode.html#containsObject">containsObject</a></li>
                
                    <li data-name="FrameNode#containsRect"><a href="FrameNode.html#containsRect">containsRect</a></li>
                
                    <li data-name="FrameNode#getObject"><a href="FrameNode.html#getObject">getObject</a></li>
                
                    <li data-name="FrameNode#getObjects"><a href="FrameNode.html#getObjects">getObjects</a></li>
                
                    <li data-name="FrameNode#getParamTypes"><a href="FrameNode.html#getParamTypes">getParamTypes</a></li>
                
                    <li data-name="FrameNode#getParamValue"><a href="FrameNode.html#getParamValue">getParamValue</a></li>
                
                    <li data-name="FrameNode#getRelativeRect"><a href="FrameNode.html#getRelativeRect">getRelativeRect</a></li>
                
                    <li data-name="FrameNode#isViewModeLinked"><a href="FrameNode.html#isViewModeLinked">isViewModeLinked</a></li>
                
                    <li data-name="FrameNode#setParamValue"><a href="FrameNode.html#setParamValue">setParamValue</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
            
            <li class="item" data-name="ObjectNode">
                <span class="title">
                    <a href="ObjectNode.html">ObjectNode</a>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="ObjectNode#creationSequence"><a href="ObjectNode.html#creationSequence">creationSequence</a></li>
                
                    <li data-name="ObjectNode#id"><a href="ObjectNode.html#id">id</a></li>
                
                    <li data-name="ObjectNode#patcherId"><a href="ObjectNode.html#patcherId">patcherId</a></li>
                
                    <li data-name="ObjectNode#type"><a href="ObjectNode.html#type">type</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="ObjectNode#getParamTypes"><a href="ObjectNode.html#getParamTypes">getParamTypes</a></li>
                
                    <li data-name="ObjectNode#getParamValue"><a href="ObjectNode.html#getParamValue">getParamValue</a></li>
                
                    <li data-name="ObjectNode#setParamValue"><a href="ObjectNode.html#setParamValue">setParamValue</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                <span class="subtitle">Events</span>
                
                    <li data-name="ObjectNode.event:param_changed"><a href="ObjectNode.html#.event:param_changed">param_changed</a></li>
                
                    <li data-name="ObjectNode.event:param_set"><a href="ObjectNode.html#.event:param_set">param_set</a></li>
                
                </ul>
            </li>
            
            <li class="item" data-name="ParamNode">
                <span class="title">
                    <a href="ParamNode.html">ParamNode</a>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="ParamNode#creationSequence"><a href="ParamNode.html#creationSequence">creationSequence</a></li>
                
                    <li data-name="ParamNode#id"><a href="ParamNode.html#id">id</a></li>
                
                    <li data-name="ParamNode#remoteSequence"><a href="ParamNode.html#remoteSequence">remoteSequence</a></li>
                
                    <li data-name="ParamNode#type"><a href="ParamNode.html#type">type</a></li>
                
                    <li data-name="ParamNode#value"><a href="ParamNode.html#value">value</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="ParamNode#getParamTypes"><a href="ParamNode.html#getParamTypes">getParamTypes</a></li>
                
                    <li data-name="ParamNode#getParamValue"><a href="ParamNode.html#getParamValue">getParamValue</a></li>
                
                    <li data-name="ParamNode#setParamValue"><a href="ParamNode.html#setParamValue">setParamValue</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                <span class="subtitle">Events</span>
                
                    <li data-name="ParamNode.event:change"><a href="ParamNode.html#.event:change">change</a></li>
                
                </ul>
            </li>
            
            <li class="item" data-name="PatcherNode">
                <span class="title">
                    <a href="PatcherNode.html">PatcherNode</a>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="PatcherNode#creationSequence"><a href="PatcherNode.html#creationSequence">creationSequence</a></li>
                
                    <li data-name="PatcherNode#id"><a href="PatcherNode.html#id">id</a></li>
                
                    <li data-name="PatcherNode#name"><a href="PatcherNode.html#name">name</a></li>
                
                    <li data-name="PatcherNode#patcherId"><a href="PatcherNode.html#patcherId">patcherId</a></li>
                
                    <li data-name="PatcherNode#type"><a href="PatcherNode.html#type">type</a></li>
                
                    <li data-name="PatcherNode#viewMode"><a href="PatcherNode.html#viewMode">viewMode</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="PatcherNode#getFrame"><a href="PatcherNode.html#getFrame">getFrame</a></li>
                
                    <li data-name="PatcherNode#getFrames"><a href="PatcherNode.html#getFrames">getFrames</a></li>
                
                    <li data-name="PatcherNode#getObject"><a href="PatcherNode.html#getObject">getObject</a></li>
                
                    <li data-name="PatcherNode#getObjectByScriptingName"><a href="PatcherNode.html#getObjectByScriptingName">getObjectByScriptingName</a></li>
                
                    <li data-name="PatcherNode#getObjects"><a href="PatcherNode.html#getObjects">getObjects</a></li>
                
                    <li data-name="PatcherNode#getParamTypes"><a href="PatcherNode.html#getParamTypes">getParamTypes</a></li>
                
                    <li data-name="PatcherNode#getParamValue"><a href="PatcherNode.html#getParamValue">getParamValue</a></li>
                
                    <li data-name="PatcherNode#setParamValue"><a href="PatcherNode.html#setParamValue">setParamValue</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                <span class="subtitle">Events</span>
                
                    <li data-name="PatcherNode.event:frame_changed"><a href="PatcherNode.html#.event:frame_changed">frame_changed</a></li>
                
                    <li data-name="PatcherNode.event:object_changed"><a href="PatcherNode.html#.event:object_changed">object_changed</a></li>
                
                </ul>
            </li>
            
            <li class="item" data-name="Resource">
                <span class="title">
                    <a href="Resource.html">Resource</a>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="Resource#dimensions"><a href="Resource.html#dimensions">dimensions</a></li>
                
                    <li data-name="Resource#filename"><a href="Resource.html#filename">filename</a></li>
                
                    <li data-name="Resource#id"><a href="Resource.html#id">id</a></li>
                
                    <li data-name="Resource#isSVG"><a href="Resource.html#isSVG">isSVG</a></li>
                
                    <li data-name="Resource#objectContext"><a href="Resource.html#objectContext">objectContext</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="Resource#destroy"><a href="Resource.html#destroy">destroy</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                <span class="subtitle">Events</span>
                
                    <li data-name="Resource.event:data_received"><a href="Resource.html#.event:data_received">data_received</a></li>
                
                </ul>
            </li>
            
            <li class="item" data-name="State">
                <span class="title">
                    <a href="State.html">State</a>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="State#connectionState"><a href="State.html#connectionState">connectionState</a></li>
                
                    <li data-name="State#hostname"><a href="State.html#hostname">hostname</a></li>
                
                    <li data-name="State#isMotionEnabled"><a href="State.html#isMotionEnabled">isMotionEnabled</a></li>
                
                    <li data-name="State#isStateLoaded"><a href="State.html#isStateLoaded">isStateLoaded</a></li>
                
                    <li data-name="State#name"><a href="State.html#name">name</a></li>
                
                    <li data-name="State#port"><a href="State.html#port">port</a></li>
                
                    <li data-name="State#uuid"><a href="State.html#uuid">uuid</a></li>
                
                    <li data-name="State#wsUrl"><a href="State.html#wsUrl">wsUrl</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="State#close"><a href="State.html#close">close</a></li>
                
                    <li data-name="State#connect"><a href="State.html#connect">connect</a></li>
                
                    <li data-name="State#createResource"><a href="State.html#createResource">createResource</a></li>
                
                    <li data-name="State#getObjectById"><a href="State.html#getObjectById">getObjectById</a></li>
                
                    <li data-name="State#getObjectsByScriptingName"><a href="State.html#getObjectsByScriptingName">getObjectsByScriptingName</a></li>
                
                    <li data-name="State#getPatchers"><a href="State.html#getPatchers">getPatchers</a></li>
                
                    <li data-name="State#sendMotionData"><a href="State.html#sendMotionData">sendMotionData</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                <span class="subtitle">Events</span>
                
                    <li data-name="State.event:connection_changed"><a href="State.html#.event:connection_changed">connection_changed</a></li>
                
                    <li data-name="State.event:frame_added"><a href="State.html#.event:frame_added">frame_added</a></li>
                
                    <li data-name="State.event:frame_changed"><a href="State.html#.event:frame_changed">frame_changed</a></li>
                
                    <li data-name="State.event:frame_removed"><a href="State.html#.event:frame_removed">frame_removed</a></li>
                
                    <li data-name="State.event:loaded"><a href="State.html#.event:loaded">loaded</a></li>
                
                    <li data-name="State.event:motion_disabled"><a href="State.html#.event:motion_disabled">motion_disabled</a></li>
                
                    <li data-name="State.event:motion_enabled"><a href="State.html#.event:motion_enabled">motion_enabled</a></li>
                
                    <li data-name="State.event:object_added"><a href="State.html#.event:object_added">object_added</a></li>
                
                    <li data-name="State.event:object_changed"><a href="State.html#.event:object_changed">object_changed</a></li>
                
                    <li data-name="State.event:object_removed"><a href="State.html#.event:object_removed">object_removed</a></li>
                
                    <li data-name="State.event:patcher_added"><a href="State.html#.event:patcher_added">patcher_added</a></li>
                
                    <li data-name="State.event:patcher_changed"><a href="State.html#.event:patcher_changed">patcher_changed</a></li>
                
                    <li data-name="State.event:patcher_removed"><a href="State.html#.event:patcher_removed">patcher_removed</a></li>
                
                    <li data-name="State.event:reset"><a href="State.html#.event:reset">reset</a></li>
                
                </ul>
            </li>
            
            <li class="item" data-name="XebraNode">
                <span class="title">
                    <a href="XebraNode.html">XebraNode</a>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="XebraNode#creationSequence"><a href="XebraNode.html#creationSequence">creationSequence</a></li>
                
                    <li data-name="XebraNode#id"><a href="XebraNode.html#id">id</a></li>
                
                    <li data-name="XebraNode#type"><a href="XebraNode.html#type">type</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="XebraNode#getParamTypes"><a href="XebraNode.html#getParamTypes">getParamTypes</a></li>
                
                    <li data-name="XebraNode#getParamValue"><a href="XebraNode.html#getParamValue">getParamValue</a></li>
                
                    <li data-name="XebraNode#setParamValue"><a href="XebraNode.html#setParamValue">setParamValue</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                <span class="subtitle">Events</span>
                
                    <li data-name="XebraNode.event:destroy"><a href="XebraNode.html#.event:destroy">destroy</a></li>
                
                </ul>
            </li>
            
        </ul>
        <!--  MIXINS -->
        <ul>
            <li class="nav-header">Mixins</li>
            
            <li class="item" data-name="LiveDisplayValueMixin">
                <span class="title">
                    <a href="LiveDisplayValueMixin.html">LiveDisplayValueMixin</a>
                    
                </span>
                <ul class="members itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
            
            <li class="item" data-name="LiveScalingObjectMixin">
                <span class="title">
                    <a href="LiveScalingObjectMixin.html">LiveScalingObjectMixin</a>
                    
                </span>
                <ul class="members itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
            
            <li class="item" data-name="ResourceObjectMixin">
                <span class="title">
                    <a href="ResourceObjectMixin.html">ResourceObjectMixin</a>
                    
                </span>
                <ul class="members itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="ResourceObjectMixin#getResourceAtIndex"><a href="ResourceObjectMixin.html#getResourceAtIndex">getResourceAtIndex</a></li>
                
                    <li data-name="ResourceObjectMixin#getResourceCount"><a href="ResourceObjectMixin.html#getResourceCount">getResourceCount</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                <span class="subtitle">Events</span>
                
                    <li data-name="ResourceObjectMixin.event:resources_changed"><a href="ResourceObjectMixin.html#.event:resources_changed">resources_changed</a></li>
                
                </ul>
            </li>
            
        </ul>
        <!--  MIXINS -->
        <ul>
            <li class="nav-header">Tutorials</li>
            
            <li class="item" data-name="00-objectlist">
                <span class="title">
                    <a href="tutorial-00-objectlist.html">00 Object List</a>
                </span>
            </li>
            
            <li class="item" data-name="01-quickstart">
                <span class="title">
                    <a href="tutorial-01-quickstart.html">01 QuickStart</a>
                </span>
            </li>
            
            <li class="item" data-name="02-connecting">
                <span class="title">
                    <a href="tutorial-02-connecting.html">02 Connecting</a>
                </span>
            </li>
            
            <li class="item" data-name="03-objects">
                <span class="title">
                    <a href="tutorial-03-objects.html">03 Working with Objects</a>
                </span>
            </li>
            
            <li class="item" data-name="04-statetree">
                <span class="title">
                    <a href="tutorial-04-statetree.html">04 Object State Tree</a>
                </span>
            </li>
            
            <li class="item" data-name="05-scriptingname">
                <span class="title">
                    <a href="tutorial-05-scriptingname.html">05 Scripting Name</a>
                </span>
            </li>
            
            <li class="item" data-name="06-valuevsdistance">
                <span class="title">
                    <a href="tutorial-06-valuevsdistance.html">06 Value vs. Distance</a>
                </span>
            </li>
            
            <li class="item" data-name="07-resources">
                <span class="title">
                    <a href="tutorial-07-resources.html">07 Image Resources</a>
                </span>
            </li>
            
            <li class="item" data-name="08-motion">
                <span class="title">
                    <a href="tutorial-08-motion.html">08 Motion and Orientation</a>
                </span>
            </li>
            
            <li class="item" data-name="09-arbitrarymessages">
                <span class="title">
                    <a href="tutorial-09-arbitrarymessages.html">09 Sending Arbitrary Messages</a>
                </span>
            </li>
            
        </ul>
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="tutorial-08-motion.html">Tutorial: 08 Motion and Orientation</h1>
        <section>
    
<header>
    

    <h2>08 Motion and Orientation</h2>
</header>  

<article>
    <h3>Sending Motion Data</h3><p>Xebra can pass acceleration, rotation and compass data to Max. These motion updates are received by Max through the mira.motion object. Unlike other xebra parameters, which each belong to an instance of <a href="ObjectNode.html">ObjectNode</a>, the parameters that manage motion data are owned by the root <a href="State.html">State</a> object. This is by design: motion updates are expected to occur frequently, on the order of 100 times a second, so all mira.motion objects share a group of global parameters.</p>
<p>Unlike other parameters, you don't update acceleration parameters directly by calling ObjectNode.setParamValue. Instead, the function State.sendMotionData is used. This object can send motion data corresponding to acceleration, gravity, orientation and rotation rate, as described in <a href="Xebra.html#.MOTION_TYPES">Xebra.MOTION_TYPES</a>. Before sending motion data using this function, it's important to call State.isMotionEnabled. This will return true if the Max patch contains at least one mira.motion object. Otherwise it is pointless to send motion data, since there is no Max object to receive it. You can subscribe to State.event#motion_enabled and State.event#motion_disabled to be notified when the value of State.isMotionEnabled changes to true or false, respectively.</p>
<pre class="prettyprint source"><code>// Sending acceleration data
var xebraState; // Connected State object
var pollHandle; // Handle to the polling request
var epoch = Date.now() / 1000.0;

function pollMotionData() {
    // Generate some random acceleration data
    var accel = {
        x: Math.random() * 2 - 1,
        y: Math.random() * 2 - 1,
        z: Math.random() * 2 - 1,
    };

    var timestamp = (Date.now() / 1000.0) - epoch;

    // Send it to Max
    xebraState.sendMotionData(
        Xebra.MOTION_TYPES.ACCEL,
        accel.x,
        accel.y,
        accel.z,
        timestamp
    );

    if (xebraState.isMotionEnabled) {
        pollHandle = window.requestAnimationFrame(pollMotionData);
    }
}

function enablePolling() {
    pollMotionData();
}

function disablePolling() {
    if (pollHandle !== undefined) {
        window.cancelAnimationFrame(pollHandle);
    }
}

xebraState.on(&quot;motion_enabled&quot;, enablePolling);
xebraState.on(&quot;motion_disabled&quot;, disablePolling);</code></pre>
</article>

</section>  


        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Mon Dec 19 2016 09:28:26 GMT-0800 (PST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>